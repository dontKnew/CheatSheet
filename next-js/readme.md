## Next JS Toutrial

#### Intro 
- Next.js is a framework for building web applications.
- With Next.js, you can build user interfaces using React components. Then, Next.js provides additional structure, features, and optimizations for your application.
- Next.js can help you build interactive, dynamic, and fast web applications.

### Installation
- npx create-next-app@latest 
- if you will ask elint ? used "yes" : its help to indentify the errors :)

## 1. Pass Props(Variable) to another componet
```jsx
export default function Home() {
  return (
    <>
      <User name="Sajid" />
      <User name="Kamina" />
      <User name="Krishna" />
    </>
  );
}
function User(props){
  return (
    <h1> Hello {props.name}</h1>
  )
}
```
```jsx
## send Child to Parent Data
export default function Page() {
  const [userData, setUserData] = useState([]);
  const handleUserData = (data) => {
    setUserData((prevData) => [...prevData, data]);
  };

  return (
    <>
      <User name="Sajid" onData={handleUserData} />
      <User name="Kamina" onData={handleUserData} />
      <User name="Krishna" onData={handleUserData} />
      <div>
        <h2>User Data Received:</h2>
        <ul>
          {userData.map((data, index) => (
            <li key={index}>{data}</li>
          ))}
        </ul>
      </div>
    </>
  );
}

function User(props) {
  const handleButtonClick = () => {
    props.onData(`from Child Component ${props.name}`);
  };

  return (
    <div>
      <h1>Hello {props.name}</h1>
      <button onClick={handleButtonClick}>Send Data to Page</button>
    </div>
  );
}
``

## 2. call event 
### we used 'use client' because this is client side can be render :) but by default all component will be server componennt   
```jsx
'use client'
export default function Home() {
  const noti= (hello) =>{
    alert(`Hello ${hello}`);
  }
  return (
    <>
      <button onClick={()=>{noti("Krishna")}}> click me</button>
    </>
  );
}
```
## 3. use state
```jsx
import React, { useState } from 'react';

function Counter() {
const [count, setCount] = useState(0); // setCount for update the value and count for get the current value

const increment = () => {
    setCount(count + 1);
    // setCount for update the value
};

return (
    {/*when click button, it return current states updated vlaue :)*/}
    <div>
    <p>Count: {count}</p> 
    {/*count for get the current value*/}
    <button onClick={increment}>Increment</button> 
    </div>
);

```

## 4. Routes
- Basic Folder File Base Routing can be used like home/page.js & about/page.js in src or app directory of root project, Now you can access the localhsot:3000/home or localhost:3000/about page
- Dynamic Routes : you should use folder name Ex.  student_list/`[student_details]`
```jsx
//folder : student_list/[student]/page.js
"use client"
export default function Student({ params }) {
    console.warn(params.student) 
    return (
      <div>
        <h1>Hello, Student {params.student}</h1>
      </div>
    );
  }
  
```
- Get The All Segment after route "student-list/student/2020/marksheet" after student we can get theall segement using create folder [...student] instead of [student]
```jsx
//folder : student_list/[...student]/page.js
"use client"
export default function Student({ params }) {
    console.warn(params.student)
    return (
      <div>
        <h1>Hello, Student Year {params.student[0]} & CBSE {params.student[1]}</h1>
      </div>
    );
  }
```


## 5. Link & Navigation 
```jsx
import Link from "next/link"
import { useRouter } from "next/navigation";
export default function Menu(){
    const router = useRouter();
    const goToContact = ()=>{
        router.push("/contact")
    }
    return (
        <>
        <Link href="/">Home <br /></Link>
        <Link href="/about">About<br /></Link>
        <Link href="/contact">Contact<br /></Link>
        <button onClick={goToContact}>Click To Contact</button>
        </>
    )
}
```
## 5. Common Layout.js
- its get the all component/routes code as children/props (any name)
- if you dont create layout.js file in inside of folder , it will take as default layout in from root app or src
```jsx
export const metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
}
export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body >{children}</body>
    </html>
  )
}
```

## 6. 404 Page
- For Global Used 404 Page create not-found.js file in src or app directory: 
```jsx
// name spell must be same : not-found.js 
export default function NotFound(){
    return(
        <>
        <h1> 404 Not Found</h1>
        </>
    )
}
```
-- For Specific Admin or other sub folder page  create 
```jsx
// folder structure : admin/[...not-found]/page.js
export default function NotFound(){
    return(
        <>
        <h1> Admin Page Not Found</h1>
        </>
    )
}
```

## 7. Middleware : will run each of http request
- use for protect the page like admin dashboard can not access without valid login token
Example One:
```jsx
//src/middleware.js : filename must be same
import { NextResponse } from 'next/server'
 
export function middleware(request) {
  var isLogged = false; // if false redirect to admin login page
  if(!isLogged){
    return NextResponse.redirect(new URL('/admin', request.url))   
  }
}

export const config = {
  matcher: ['/admin/dashboard', '/admin/profile'] // /admin/:path* match all  admin inside the path
}
```
Example Two : different route name and response folder name different , in this case : 
```jsx
import { NextResponse } from 'next/server'

export function middleware(request) {
  if (request.nextUrl.pathname.startsWith('/admin')) {
    return NextResponse.rewrite(new URL('/admin-construct', request.url))
  }
}
```

Example Three : You Can get incoming Cookies & set , delete etc.
```jsx
import { NextResponse } from 'next/server'

export function middleware(request) {
  // Assume a "Cookie:nextjs=fast" header to be present on the incoming request
  // Getting cookies from the request using the `RequestCookies` API
  let cookie = request.cookies.get('nextjs')
  console.log(cookie) // => { name: 'nextjs', value: 'fast', Path: '/' }
  const allCookies = request.cookies.getAll()
  console.log(allCookies) // => [{ name: 'nextjs', value: 'fast' }]
 
  request.cookies.has('nextjs') // => true
  request.cookies.delete('nextjs')
  request.cookies.has('nextjs') // => false
 
  // Setting cookies on the response using the `ResponseCookies` API
  const response = NextResponse.next()
  response.cookies.set('vercel', 'fast')
  response.cookies.set({
    name: 'vercel',
    value: 'fast',
    path: '/',
  })
  cookie = response.cookies.get('vercel')
  console.log(cookie) // => { name: 'vercel', value: 'fast', Path: '/' }
  // The outgoing response will have a `Set-Cookie:vercel=fast;path=/test` header.
 
  return response
}
``` 
Example Four : Procced the function if user authenticated
```jsx
import { NextResponse } from 'next/server'
import { isAuthenticated } from '@lib/auth' // your library determine user authentication or not
 
// Limit the middleware to paths starting with `/api/`
export const config = {
  matcher: '/api/:function*',
}
export function middleware(request) {
  // Call our authentication function to check the request
  if (!isAuthenticated(request)) {
    return new NextResponse(
      JSON.stringify({ success: false, message: 'authentication failed' }),
      { status: 401, headers: { 'content-type': 'application/json' } }
    )
  }
}
```

## 8. Project Organization
- Private folders can be created by prefixing a folder with an underscore: *_folderName* & This is  indicates the folder should not be considered by the routing system
- Import Alias @
```json
//jsconfig.json
{
  "compilerOptions": {
    "baseUrl": "src/",
    "paths": {
      "@/styles/*": ["styles/*"],
      "@/components/*": ["components/*"]
    }
  }
}
```
```jsx
// pages/index.js
import Button from '@/components/button'
import '@/styles/styles.css'
import Helper from 'utils/helper'
 
export default function HomePage() {
  return (
    <Helper>
      <h1>Hello World</h1>
      <Button />
    </Helper>
  )
}
``` 
## 10. Client & Server Side
- Client
  - You can use event, use hook, use state and interactive userterface
  - __console_log()__ function work in browser console
  - To Make Client Side Render , you can use "use client" keyword in the top of component file
  - Example of Client Side Rendering & function
  ```jsx
  'use client'
  export default function Api() {
    const noti= (hello) =>{
      alert(`Hello ${hello}`);
    }
    return (
      <>
      <Menu></Menu>
        <button onClick={()=>{noti("About Me")}}> click me</button>
      </>
    );
  }
  ```
- Server
  - You can not use event, use hook, use state and interactive userterface
  - you can just render the data
  - __console_log()__ function work will not in browser console & it will show in terminal 
  - by default all server sider component  
  - Ex. Server Side Rendering
  ```jsx 
    async function getData() {
    const res = await fetch('https://dummyjson.com/products/1')
    if (!res.ok) {
      throw new Error('Failed to fetch data')
    }
    return res.json()
  }
  export default async function Page() {
    const data = await getData()
    console.warn(data);
    return (
      <h1> {data.title}</h1>
    )
  }```

- Use Server & Clinet Component together 
  - create external client component with top line "user client" and import to server component, it will work!

## 11. CSS
- __moudle css__  specific css code for componnent & useful when project to big
```css
// file : mycss.module.css
.main {
    color:red;
}
#title {
  color:blue;
}
```
```css
// file : custom.module.css
.main {
    color:green;
}
#title {
  color:yellow;
}

.extract_class {
  color:orange;
}
```
```jsx
import mycss from './mycss.module.css'
import custom from './custom.module.css'
export default function Home() {
  const {extract_class} = custom;
  return (
    <>
      <h3 id={mycss.title}></h3>
      <h1 class={mycss.main}> Home Page</h1>

      <h3 id={custom.title}></h3>
      <h1 class={custom.main}> Home Page</h1>
      <h5 className={extract_class}><h5>
    </>
  );
}
```
- globals.css is for all component , you can simply import from './globals.css' in [layout.js root] folder & and use the css code
- inline css : 
```jsx
const divStyle = {
    backgroundColor: 'lightblue',
    color: 'black',
    padding: '10px',
  };

  return (
    <div style={divStyle}>
      <p>This is a paragraph with inline styles.</p>
    </div>
  );
```

## 12. Optimzing
- Images
```jsx
'use client'
import Image from 'next/image'
import Profile from "../../public/images/me.jpg"

export default function Page() {
  return (
    <>

      <h3>Local Image With Next JS Image Component</h3>      
      <Image src={Profile}  /> <br /> 

      <h3>Other Domain With Next JS Image Component & its required config in next.config.js file </h3>      
      <Image src="https://img.freepik.com/free-vector/cute-boy-standing-position-showing-thumb_96037-450.jpg" width={200} height={200} /> <br />

      <h3>Local Image with default html img tag </h3>      
      <img src={Profile.src} />

      <h3>Domain Image with default html img tag </h3>      
      <img src="https://img.freepik.com/free-vector/cute-boy-standing-position-showing-thumb_96037-450.jpg"></img>

    </>
  )
}
```

```js
//file: next.config.js
 module.exports = {
  images: {
    remotePatterns: [
      {
        protocol: 'https',
        hostname: 'img.freepik.com',
        port: '',
        pathname: '/**',
      },
    ],
  },
}
```

## 12.2. Google Font
- Go to <a href="https://fonts.google.com/"> click here </a>, get the font link add in root layout.js file
- CSS Variable & Normal Apply & NEXT JS Feature Font Exmaple : 
```jsx
// file : page.js
'use client'
import { Hind_Siliguri } from "next/font/google"
const hind_font = Hind_Siliguri({
  weight: '500',
  subsets: ['latin'],
  display: 'swap',
})
 
export default function Page() {
  return (
    <>

      <h3>Without google font </h3>      
      <h3 className="site-font">Google Hind Font </h3>      
      <h3 className={hind_font.className}>Next JS Feature Hind Fonts </h3>
      <h4 className="lilita-one">Google Lilita Font</h4>

      <h4 className="site-font-var">Google Hind Font with css variable</h4>
      <h4 className="lilita-one-font-var">Google Lilita Font cSS variable </h4>
    </>
  )
}
```
```jsx
// file : layout.js
import { Hind_Siliguri, Lilita_One } from 'next/font/google'
import  './globals.css';
export const metadata = {
  title: 'PHP Master .com',
  description: 'Generated by create next app',
}
const hind_font = Hind_Siliguri({
  subsets: ['latin'],
  variable: '--hind-font', // variable for use in css code 
  display: 'swap',
  weight:"500"
})
 
const lilita_One = Lilita_One({
  subsets: ['latin'],
  variable: '--lilita-font', // variable for use in css code 
  display: 'swap',
  weight:"400"
})
export default function RootLayout({ children }) {
  return (
    <html lang="en" className={`${hind_font.variable} ${lilita_One.variable}`}>
      <head>
      <link rel="preconnect" href="https://fonts.googleapis.com" />
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
      <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@600&display=swap" rel="stylesheet" />
      </head>
      <body >{children}</body>
    </html>
  )
}

```
```css
// glboal.css : you can use here body & html for apply in root of project  
.site-font {
    font-family: 'Hind Siliguri', sans-serif;
}
.lilita-one{
    font-family: 'Lilita One', cursive;
}

.site-font-var {
    font-family: var(--hind-font);
}
.lilita-one-var{
    font-family: var(--lilita-font);
}
h1 {
    color:blue;
}
```

### 12.3 Script 
- <Script> commponent of next js that can apply current component js code
```jsx
import Script from 'next/script'
export default function DashboardLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <>
      <section>{children}</section>
      <Script src="https://example.com/script.js" />
    </>
  )
}
```

### 12.4 MetaData
- static metadata
```jsx
import { Metadata } from 'next'
export const metadata: Metadata = {
  title: '...',
  description: '...',
}
export default function Page() {}
```
- dynamic metadata you can use funtion of next js  generateMetaTag({title:"", description:""})

### 12.5 Static Assets
- you can put your all assets like css, js image, sitemap robotsx.txt file in the public folder then you can simply use them in your project via next js __<Image> Component__ or __<img>__ , __<Script> Component__ or <script> tag etc.
```jsx
import Image from 'next/image'
export function Avatar() {
  return <Image src="@public/me.png" alt="me" width="64" height="64" />
}
```

### 12.6 Pure HTML Code Generator
- with next js you can generate the pure html code 
```js
//file : next.config.js
 module.exports = {
  output:"export"
}
```
- After above configuration in next.config.js file, simply you can genereate the static html code page :)
- run command : npm run build ; see the output in __out__ folder

### 13 Redirecting...
- Component
```jsx
import { redirect } from "next/navigation"
export default function Page() {
  let isLogin = false;
  if(!isLogin){
      redirect("/"); // if user not logged, redirect to home page
  }
  return (
    <>
      <h1> User Page </h1>
    </>
  )
}
```
- if page does or removed paged then redirect all traffic from remvoed page to next page 
```js
// file : next.config.js
 module.exports = {
  redirects:async()=>{
    return [
      {
        source:"/user",
        destination:"/",
        permanent:false 
      }
      
    ]
  }
}
//  Wildcard, path matching For here : https://nextjs.org/docs/app/api-reference/next-config-js/redirects
```
### 14. Envrionment Variable
- you can access env variable anywhere in next js component without import anything
- may be env variable like your system envrionment variable
```js
// Fixed file Name : .env.local
API_KEY = "1212SDKLAJLKSXMK327"
```
```jsx
export default function Page() {
  return (
    <>
      <h1> Home Page </h1>
      <h5>Your API Key : {process.env.API_KEY}</h5>
    </>
  )
}
// you can see all env variable which is in your system just put : console.log(process.env)
```

### 15. Import function : 
i. dangerouslySetInnerHTML
```jsx
	<div className={'blog-body mt-10'} dangerouslySetInnerHTML={{ __html: post.body }}  />
```